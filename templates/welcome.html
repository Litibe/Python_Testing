<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Summary | GUDLFT Registration</title>
</head>
<body>
    <h1>Summary | GUDLFT Registration</h1>
        <h2>Welcome, {{club['name']}} ({{club['email']}}) </h2><a href="{{url_for('logout')}}">Logout</a>

    {% with messages = get_flashed_messages()%}
    {% if messages %}
        <ul>
       {% for message in messages %}
            <li>{{message}}</li>
        {% endfor %}
       </ul>
    {% endif%}
    <div>Points available: {{club['points']}}</div>
    <h3>Competitions:</h3>
    <ul>
        {% for comp in competitions%}
        <li>
            {{comp['name']}}<br />
            Date: {{comp['date']}}</br>
            
            {%if comp['date']>date_now%}
                {%if comp['numberOfPlaces']|int >0%}
                Number of Places: {{comp['numberOfPlaces']}}
                <a href="{{ url_for('book',competition=comp['name'],club=club['name'])}}">Book Places</a>
                {% else %}
                Competition Completed ! 
                {%endif%}
            {% else %} 
            Competition finished !    
            {%endif%}
        </li>
        <hr />
        {% endfor %}
    </ul>
    {%endwith%}
    <h3>DashBord - display booking:</h3>
    {% if booking != [] %}
    <ul>
    {% for events in booking %}
        {% for event, infos in events.items() %}
        <li>Date : {{event}} : <br/>
            {% for key, value in infos.items() %}
                <ul>
                <li>Competition : {{key}}</li>
                    <ul>
                    {% for club, places in value.items() %}
                        <li> Club : {{club}} =>  {{places}} Places
                    {% endfor %}
                    </ul>
                </ul>
                <hr/>
           {% endfor %}
        </li>
        {% endfor %}
    {% endfor %}
    </ul>
    {%else%}
    Any Reservations
    {% endif %}
</body>
</html>